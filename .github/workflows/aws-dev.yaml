on:
  push:
    branches:
      - "main"
name: deploy to Amazon-ECS

env: 
  AWS_REGION: eu-north-1
  ECR_REPOSITORY: kasim-test
  ECS_CLUSTER: test-kasim

jobs: 
  deploy: 
    name: Deploy 
    runs-on: ubuntu-latest

    steps: 
    - name: Checkout
      uses: actions/checkout@v3
    - name: Deploy
      id: build-image
      run: |
        eho "deploying" 
  slack-notify:
    name: slack-notify
    runs-on: ubuntu-latest
    steps: 
    - name: Send custom JSON data to Slack workflow
      id: slack
      uses: slackapi/slack-github-action@v1.18.0
      with:
       # For posting a rich message using Block Kit
       payload: |
        {
          "text": "GitHub Action build result: ${{ job.status }}\n${{ github.event.pull_request.html_url || github.event.head_commit.url }}",
          "blocks": [
            {
              "type": "section",
              "text": {
                "type": "mrkdwn",
                "text": "GitHub Action build result: ${{ job.status }}\n${{ github.event.pull_request.html_url || github.event.head_commit.url }}"
              }
            }
          ]
        }
      env:
        SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        SLACK_WEBHOOK_TYPE: INCOMING_WEBHOOK
